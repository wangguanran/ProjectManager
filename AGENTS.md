# ProjectManager Agent Guide

You are working in the `ProjectManager` repository.

## Priorities

1. Treat `docs/test_cases_en.md` as the source of truth for expected behavior.
2. Keep changes minimal and tightly scoped.
3. Prefer reproducible steps with exact commands and file paths.
4. After each module-level change (or after verifying a test suite passes), make a small commit and push it.
5. Track work in the Obsidian TODO note and delete completed TODO items:
   - `/Users/wangguanran/Library/Mobile Documents/iCloud~md~obsidian/Documents/小王的技术站/ProjectManager/RepoScan_TODO.md`

## Local Dev Commands

- Setup (recommended):
  - `python3 -m venv /tmp/pm-venv`
  - `/tmp/pm-venv/bin/python -m pip install -U pip`
  - `cd /Users/wangguanran/Codes/ProjectManager && /tmp/pm-venv/bin/python -m pip install -e '.[dev]'`
- Tests:
  - `cd /Users/wangguanran/Codes/ProjectManager && /tmp/pm-venv/bin/python -m pytest`
- Lint/format:
  - `cd /Users/wangguanran/Codes/ProjectManager && PATH="/tmp/pm-venv/bin:$PATH" make lint`
  - `cd /Users/wangguanran/Codes/ProjectManager && PATH="/tmp/pm-venv/bin:$PATH" make format`

## Safety Rules

- For destructive project operations (`po_apply`, `po_revert`, `project_diff`), prefer running with `--dry-run` first when operating on real repositories.
- Avoid destructive git commands (for example `git reset --hard`) unless explicitly requested.

## Version/Build Rule

- `--version` must include a short git commit hash when available (for build artifacts this must not depend on a runtime `.git` directory).
- Build metadata is generated by `scripts/write_build_info.py` (used by `build.sh` and CI workflows).

