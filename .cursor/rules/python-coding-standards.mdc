---
globs: *.py
description: Python coding standards - no Chinese comments, use f-strings
---

# Python Coding Standards

## Code Style Requirements

### 1. Comments and Documentation
- **NO Chinese comments**: All comments must be written in English
- Use clear, descriptive English comments for code documentation
- Follow PEP 257 docstring conventions for function and class documentation

### 2. String Formatting
- **Use f-string expressions**: Prefer using f"" format strings
- **Avoid .format() method**: Avoid using `.format()` method when possible
- **Avoid % operator**: Avoid using `%` operator for string formatting
- Examples:
  ```python
  # ✅ Use f-strings (preferred)
  name = "John"
  message = f"Hello {name}"
  
  # ❌ Avoid .format() method
  name = "John"
  message = "Hello {}".format(name)
  
  # ❌ Avoid % operator
  name = "John"
  message = "Hello %s" % name
  ```

### 3. General Python Best Practices
- Follow PEP 8 style guidelines
- Use meaningful variable and function names
- Keep functions small and focused
- Add type hints where appropriate
- Use proper exception handling

### 4. Code Examples

#### Correct Comment Style:
```python
# This function calculates the total price including tax
def calculate_total(price, tax_rate):
    """
    Calculate total price with tax included.
    
    Args:
        price (float): Base price
        tax_rate (float): Tax rate as decimal
        
    Returns:
        float: Total price with tax
    """
    tax_amount = price * tax_rate
    total = price + tax_amount
    return total
```

#### Correct String Formatting:
```python
# Using f-string for single variable
user_name = "Alice"
greeting = f"Welcome, {user_name}!"

# Using f-string for numbers
age = 25
info = f"User is {age} years old"

# Multiple variables with f-string
name = "Bob"
age = 30
city = "New York"
profile = f"Name: {name}, Age: {age}, City: {city}"

# Complex expressions in f-string
price = 19.99
tax_rate = 0.08
total = f"Total: ${price * (1 + tax_rate):.2f}"
```

### 5. Code Formatting
- **Always run format.sh after modifying Python code**: Execute `./format.sh` to format code
- This ensures consistent code style across the project
- Formatting should be done before committing changes
- The format.sh script applies consistent indentation, spacing, and style rules

### 6. File Structure
- All Python files should follow these standards
- Import statements at the top
- Constants defined after imports
- Classes and functions with proper documentation
- Main execution code in `if __name__ == "__main__":` block
